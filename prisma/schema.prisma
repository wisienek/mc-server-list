generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Server {
  id            String   @id @default(uuid())
  online        Boolean
  host          String   @db.VarChar(255)
  port          Int      @db.SmallInt
  ipAddress     String?  @db.VarChar(255)
  eulaBlocked   Boolean
  retrievedAt   Int
  expiresAt     Int
  type          ServerType @default(JAVA) @map("type")

  javaServer    JavaServer? @relation("JavaServerToServer")
  bedrockServer BedrockServer? @relation("BedrockServerToServer")
}

model JavaServer {
  id       String                @id @default(uuid())
  icon     String?               @db.VarChar(255)
  software String?               @db.VarChar(255)
  version  Json?
  players  Json
  motd     Json
  mods     Json?
  plugins  Json?
  srvRecord Json?
  server   Server                @relation("JavaServerToServer", fields: [id], references: [id])
}

model BedrockServer {
  id       String                @id @default(uuid())
  version  Json?
  players  Json
  gamemode String               @db.VarChar
  serverId String               @db.VarChar(255)
  edition  BedrockEditionEnum
  server   Server                @relation("BedrockServerToServer", fields: [id], references: [id])
}

enum ServerType {
  JAVA
  BEDROCK
}

enum BedrockEditionEnum {
  MCPE
  MCEE
}
